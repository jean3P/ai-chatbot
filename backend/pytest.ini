[pytest]
# Django settings module
DJANGO_SETTINGS_MODULE = config.settings.base

# Python files to look for tests
python_files = tests.py test_*.py *_tests.py

# Python classes to look for tests
python_classes = Test*

# Python functions to look for tests
python_functions = test_*

# Additional command line options
addopts =
    # Verbose output
    -v
    # Show shorter traceback format
    --tb=short
    # Reuse database between test runs (faster)
    --reuse-db
    # Show test durations (slowest 10)
    --durations=10
    # Disable warnings for cleaner output
    --disable-warnings
    # Show local variables in tracebacks
    -l
    # Stop on first failure (useful for debugging)
    # -x
    # Run tests in parallel (uncomment when needed)
    # -n auto

# Markers for categorizing tests
markers =
    slow: marks tests as slow (deselect with '-m "not slow"')
    integration: marks tests as integration tests
    unit: marks tests as unit tests
    rag: marks tests related to RAG pipeline
    embeddings: marks tests related to embeddings
    database: marks tests that require database

# Test paths
testpaths = apps

# Django settings
django_find_project = false

# Coverage options (if using pytest-cov)
# addopts = --cov=apps --cov-report=html --cov-report=term

# Environment variables for test database
env =
    ENVIRONMENT=test
    DB_HOST=localhost
    DB_PORT=5433
    DB_NAME=test_chatbot
    DB_USER=postgres
    DB_PASSWORD=postgres
    DEBUG=True
    SECRET_KEY=test-secret-key-not-for-production
    REDIS_URL=redis://localhost:6379/1
